{# Basic Template example #}
{# This template is using parameters from zone.yaml, with safe defaults #}
{% set subnet_count = params.subnet_count|default(1) %}
{% set host_count = params.host_count|default(1) %}
zone: '{{ zone }}'
network: '{{ network }}'
vrf: '{{ vrf }}'
subnets:
{% for subnet_i in range(subnet_count) %}
  - name: '{{ zone }}-subnet{{ subnet_i }}'
    # use the ipv46 selector when you use the same template for ipv4 and ipv6
    # the 'ipv' variable is set to 4 or 6
    size: {{ ipv46(ipv, 27, 56) }}
    hosts:
      {% for host_i in range(host_count) %}
      - '{{ zone }}-subnet{{ subnet_i }}-host{{ host_i }}'
      {% endfor %}
{% endfor %}
